<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Blog | Jifan&#39;s Blog</title>
<meta name="keywords" content="Web" />
<meta name="description" content="Why and how did I build this blog.">
<meta name="author" content="jifan">
<link rel="canonical" href="https://jifan.tech/projects/blog/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.f18076306f12d99da3fd0751b49f6f33cf329ffa8c84f737116764e7ec2e8c2f.css" integrity="sha256-8YB2MG8S2Z2j/QdRtJ9vM88yn/qMhPc3EWdk5&#43;wujC8=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js" integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://jifan.tech/imgs/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://jifan.tech/imgs/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jifan.tech/imgs/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jifan.tech/imgs/apple-touch-icon.png">
<link rel="mask-icon" href="https://jifan.tech/imgs/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Blog" />
<meta property="og:description" content="Why and how did I build this blog." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jifan.tech/projects/blog/" />
<meta property="og:image" content="https://jifan.tech/projects/blog/projects/blog/assets/cover.jpg" /><meta property="article:section" content="projects" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://jifan.tech/projects/blog/projects/blog/assets/cover.jpg" />
<meta name="twitter:title" content="Blog"/>
<meta name="twitter:description" content="Why and how did I build this blog."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Projects",
      "item": "https://jifan.tech/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Blog",
      "item": "https://jifan.tech/projects/blog/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Blog",
  "name": "Blog",
  "description": "Why and how did I build this blog.",
  "keywords": [
    "Web"
  ],
  "articleBody": "Yes, indeed. This is not my first blog. You may find that there are some posts publised in quite a few years ago, followed by a long gap. Perhaps there will be an opportunity to tell you the story of that time â€¦â€¦\n1. My Previous Blogs 1.1 A taste of WordPress WordPress was, and probably still is, the most popular blog hosting platform in the world. Itâ€™s almost entirely code-free to start a blog with WordPress. Unfortunately, I wasnâ€™t an enthusiastic blogger then, so this product of a whim was left unused as soon as it was built.\n Figure 1. My first but empty blog\n  1.2 Blogging with Jekyll on a NGINX Server By the time I rediscovered my passion for blogging, Jekyll, as a static site generator, has already caught on. Detailed documentation, rich themes, and an active community were my reasons for choosing it.\nAfter installing the prerequisites, the entire setup process can be divided into 3 poarts.\n Server setting:  Nginx installation, configuration and deployment. server { listen 80 ; server_name _ localhost my-thistledown.com www.my-thistledown.com ; location = /webhook { proxy_pass http://127.0.0.1:3001/webhook; } # return 301 https://www.my-thistledown.com$request_uri; } server { listen 443; server_name my-thistledown.com; return 301 https://www.my-thistledown.com$request_uri; } server { listen 443 default_server ssl; server_name www.my-thistledown.com; ssl on; ssl_certificate /etc/nginx/ssl/my-thistledown.com/1692217_my-thistledown.com.pem; ssl_certificate_key /etc/nginx/ssl/my-thistledown.com/1692217_my-thistledown.com.key; ssl_session_timeout 5m; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers AESGCM:ALL:!DH:!EXPORT:!RC4:+HIGH:!MEDIUM:!LOW:!aNULL:!eNULL; ssl_prefer_server_ciphers on; root /usr/share/nginx/html; index index.html index.htm; location / { root /usr/share/nginx/html; index index.html; } error_page 404 /404.html; error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } }  Open specified ports (80, 443) and resolve my domain name to the server IP address.   Jekyll site building:  Create a new Jekyll site and add some posts. Build the site and output a static site to the nginx serverâ€™s root directory (in may case, /usr/share/nginx/html), located by the nginx configuration file.   Automated deployment:  Webhooks allow me to subscribe to certain events on GitHub.com. Every time I write a post or modify the blog locally and synchronize with the remote repository via git push, a HTTP POST payload will be sent to the webhookâ€™s configured URL. With the help of github-webhook-handler, I can receive and verifying webhook requests from GitHub and execute the local script to pull the remote repositry and rebuild the site.    2. This New Hugo-based Blog As it claims, Hugo makes building websites fun and fast. Similarly, the website building process is divided into the following stages:\n Hugo site building:  Install hugo, create a new site and add a theme, with a blistering speedðŸ’¨. Add my old posts. I was impressed by the built-in LiveReload, which saved me from repeatedly refreshing the page during development to see content changes, as I did with Jekyll.   GitHub Pages deployment:  Compared to my last site, I have to admit that GitHub Pages is a more time- and money-saving way to host a personal blog. Configuring a custom domain for my GitHub Pages site.   Add my own content:  Custom some CSS styles of the original theme. Add content and front matther to page templates. Updates:  Support $\\KaTeX$ (2022.03.29). Add a projects listing page and change the style of cover image (2022.04.02). Custom syntax highlighting style and make code block collapsible.      3. What I Talk About When I Talk About Blog The process of rebooting my blog not only helped me pick up some of the front-end knowledge I had forgotten, but also provided me with a new window of expression.\nToday, building such a site is no longer a complex project. From WordPress to Jekyll and now Hugo. Iâ€™m happy to embrace these new technologies that help us implement our ideas faster and more easily.\n",
  "wordCount" : "608",
  "inLanguage": "en",
  "image":"https://jifan.tech/projects/blog/projects/blog/assets/cover.jpg","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "jifan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jifan.tech/projects/blog/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Jifan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jifan.tech/imgs/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jifan.tech" accesskey="h" title="Jifan&#39;s Blog (Alt + H)">Jifan&#39;s Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jifan.tech/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://jifan.tech/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://jifan.tech/projects/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="https://jifan.tech/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">











<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://jifan.tech">Home</a>&nbsp;Â»&nbsp;<a href="https://jifan.tech/projects/">Projects</a></div>
    <h1 class="post-title">
      Blog
    </h1>
    <div class="post-description">
      Why and how did I build this blog.
    </div>
    <div class="post-meta">jifan

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1-my-previous-blogs" aria-label="1. My Previous Blogs">1. My Previous Blogs</a><ul>
                        
                <li>
                    <a href="#11-a-taste-of-wordpress" aria-label="1.1 A taste of WordPress">1.1 A taste of <strong>WordPress</strong></a></li>
                <li>
                    <a href="#12-blogging-with-jekyll-on-a-nginx-server" aria-label="1.2 Blogging with Jekyll on a NGINX Server">1.2 Blogging with <strong>Jekyll</strong> on a <strong>NGINX</strong> Server</a></li></ul>
                </li>
                <li>
                    <a href="#2-this-new-hugo-based-blog" aria-label="2. This New Hugo-based Blog">2. This New <strong>Hugo</strong>-based Blog</a></li>
                <li>
                    <a href="#3-what-i-talk-about-when-i-talk-about-blog" aria-label="3. What I Talk About When I Talk About Blog">3. What I Talk About When I Talk About Blog</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Yes, indeed. This is not my first blog. You may find that there are some posts publised in quite a few years ago, followed by a long gap. Perhaps there will be an opportunity to tell you the story of that time â€¦â€¦</p>
<h1 id="1-my-previous-blogs">1. My Previous Blogs<a hidden class="anchor" aria-hidden="true" href="#1-my-previous-blogs">#</a></h1>
<h2 id="11-a-taste-of-wordpress">1.1 A taste of <strong>WordPress</strong><a hidden class="anchor" aria-hidden="true" href="#11-a-taste-of-wordpress">#</a></h2>
<p><a href="https://wordpress.com/">WordPress</a> was, and probably still is, the most popular blog hosting platform in the world. It&rsquo;s almost entirely code-free to start a blog with WordPress. Unfortunately, I wasn&rsquo;t an enthusiastic blogger then, so <a href="https://mythistledown.wordpress.com/">this product of a whim</a> was left unused as soon as it was built.</p>
<figure class="align-center ">
    <img loading="lazy" src="./assets/my_first_empty_blog.png#center"
         alt="Figure 1. My first but empty blog" width="70%"/> <figcaption>
            <p>Figure 1. My first but empty blog</p>
        </figcaption>
</figure>

<h2 id="12-blogging-with-jekyll-on-a-nginx-server">1.2 Blogging with <strong>Jekyll</strong> on a <strong>NGINX</strong> Server<a hidden class="anchor" aria-hidden="true" href="#12-blogging-with-jekyll-on-a-nginx-server">#</a></h2>
<p>By the time I rediscovered my passion for blogging, <a href="https://jekyllrb.com/">Jekyll</a>, as a static site generator, has already caught on. Detailed documentation, rich themes, and an active community were my reasons for choosing it.</p>
<p>After installing the prerequisites, the entire setup process can be divided into 3 poarts.</p>
<ul>
<li><strong>Server setting</strong>:
<ul>
<li>Nginx installation, configuration and deployment.
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span>       <span class="mi">80</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span>  <span class="s">_</span> <span class="s">localhost</span> <span class="s">my-thistledown.com</span> <span class="s">www.my-thistledown.com</span> <span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">location</span> <span class="p">=</span> <span class="s">/webhook</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">proxy_pass</span> <span class="s">http://127.0.0.1:3001/webhook</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#    return 301 https://www.my-thistledown.com$request_uri;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">443</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">my-thistledown.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://www.my-thistledown.com</span><span class="nv">$request_uri</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">default_server</span> <span class="s">ssl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">server_name</span> <span class="s">www.my-thistledown.com</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">ssl</span>          <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate</span>   <span class="s">/etc/nginx/ssl/my-thistledown.com/1692217_my-thistledown.com.pem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_certificate_key</span>  <span class="s">/etc/nginx/ssl/my-thistledown.com/1692217_my-thistledown.com.key</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_session_timeout</span> <span class="mi">5m</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_protocols</span> <span class="s">TLSv1</span> <span class="s">TLSv1.1</span> <span class="s">TLSv1.2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_ciphers</span> <span class="s">AESGCM:ALL:!DH:!EXPORT:!RC4:+HIGH:!MEDIUM:!LOW:!aNULL:!eNULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">ssl_prefer_server_ciphers</span> <span class="no">on</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">root</span> <span class="s">/usr/share/nginx/html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">index</span> <span class="s">index.html</span> <span class="s">index.htm</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">root</span> <span class="s">/usr/share/nginx/html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kn">index</span> <span class="s">index.html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">error_page</span>  <span class="mi">404</span>              <span class="s">/404.html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kn">error_page</span>   <span class="mi">500</span> <span class="mi">502</span> <span class="mi">503</span> <span class="mi">504</span>  <span class="s">/50x.html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kn">location</span> <span class="p">=</span> <span class="s">/50x.html</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kn">root</span>   <span class="s">/usr/share/nginx/html</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div></li>
<li>Open specified ports (80, 443) and resolve my domain name to the server IP address.</li>
</ul>
</li>
<li><strong>Jekyll site building</strong>:
<ul>
<li>Create a new Jekyll site and add some posts.</li>
<li>Build the site and output a static site to the nginx server&rsquo;s root directory (in may case, <code>/usr/share/nginx/html</code>), located by the nginx configuration file.</li>
</ul>
</li>
<li><strong>Automated deployment</strong>:
<ul>
<li><strong>Webhooks</strong> allow me to subscribe to certain events on GitHub.com.</li>
<li>Every time I write a post or modify the blog locally and synchronize with the remote repository via <code>git push</code>, a HTTP POST payload will be sent to the webhook&rsquo;s configured URL.</li>
<li>With the help of <a href="https://github.com/rvagg/github-webhook-handler">github-webhook-handler</a>, I can receive and verifying webhook requests from GitHub and execute the local script to pull the remote repositry and rebuild the site.</li>
</ul>
</li>
</ul>
<h1 id="2-this-new-hugo-based-blog">2. This New <strong>Hugo</strong>-based Blog<a hidden class="anchor" aria-hidden="true" href="#2-this-new-hugo-based-blog">#</a></h1>
<p>As it claims, <a href="https://gohugo.io/">Hugo</a> makes building websites fun and fast. Similarly, the website building process is divided into the following stages:</p>
<ul>
<li><strong>Hugo site building</strong>:
<ul>
<li>Install hugo, create a new site and add a theme, with a blistering speedðŸ’¨.</li>
<li>Add my old posts. I was impressed by the built-in <a href="https://github.com/livereload/livereload-js">LiveReload</a>, which saved me from repeatedly refreshing the page during development to see content changes, as I did with Jekyll.</li>
</ul>
</li>
<li><strong>GitHub Pages deployment</strong>:
<ul>
<li>Compared to my last site, I have to admit that <a href="https://pages.github.com/">GitHub Pages</a> is a more time- and money-saving way to host a personal blog.</li>
<li>Configuring a custom domain for my GitHub Pages site.</li>
</ul>
</li>
<li><strong>Add my own content</strong>:
<ul>
<li>Custom some CSS styles of the original theme.</li>
<li>Add content and front matther to page templates.</li>
<li>Updates:
<ul>
<li><input checked="" disabled="" type="checkbox"> <del>Support $\KaTeX$</del> (2022.03.29).</li>
<li><input checked="" disabled="" type="checkbox"> <del>Add a projects listing page and change the style of cover image</del> (2022.04.02).</li>
<li><input disabled="" type="checkbox"> Custom syntax highlighting style and make code block collapsible.</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
</li>
</ul>
<h1 id="3-what-i-talk-about-when-i-talk-about-blog">3. What I Talk About When I Talk About Blog<a hidden class="anchor" aria-hidden="true" href="#3-what-i-talk-about-when-i-talk-about-blog">#</a></h1>
<p>The process of rebooting my blog not only helped me pick up some of the front-end knowledge I had forgotten, but also provided me with a new window of expression.</p>
<p>Today, building such a site is no longer a complex project. From WordPress to Jekyll and now Hugo. I&rsquo;m happy to embrace these new technologies that help us implement our ideas faster and more easily.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://jifan.tech">Jifan&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js" integrity="sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            
            
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false},
                {left: '\\(', right: '\\)', display: false},
                {left: '\\[', right: '\\]', display: true}
            ],
            
            throwOnError : false
        });
    });
</script>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>